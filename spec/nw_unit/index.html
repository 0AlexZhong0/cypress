<html>
  <head>
    <link href="../../bower_components/mocha/mocha.css" rel="stylesheet">
    <style type="text/css">
      iframe {
        height: 400px;
        width: 300px;
        position: fixed;
        top: 75px;
        right: 20px;
        border: 1px solid #ddd;
        box-shadow: 1px 1px 2px #999;
      }
    </style>
    <script type="text/javascript" src="../../bower_components/jquery/dist/jquery.js"></script>
    <script type="text/javascript" charset="utf-8">
      // Remove symbols of node-webkit to avoid conficts with mocha in browser.
      var nodeRequire = require;
      var nodeGlobal = global;
      var nodeProcess = process;
      require = undefined;
      global = undefined;
      process = undefined;
    </script>
    <!--
    Use the browser version of mocha, the node version of mocha will
    run tests in node contex, which make it imposssible to test nw.gui.
    -->
    <script type="text/javascript" src="../../bower_components/mocha/mocha.js"></script>
    <script type="text/javascript" charset="utf-8">
      // Restore default node-webkit environment.
      require = nodeRequire;
      global = nodeGlobal;
      process = nodeProcess;
    </script>
  </head>
  <body>
    <div id="mocha"></div>
    <script type="text/javascript">
      mocha.setup("bdd")

      // change the process.cwd() back
      // to what our real app expects!
      process.chdir("../../")

      // set to test env
      process.env["NODE_ENV"] = "test"
    </script>
    <script type="text/javascript">
      require("coffee-script/register")
      require("./tests/nw.coffee")(window)
    </script>
    <script type="text/javascript" src="js/iframe.js"></script>
  </body>
</html>