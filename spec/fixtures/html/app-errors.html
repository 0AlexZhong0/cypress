<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>App Errors</title>
    <link rel="icon" href="data:;base64,=">
    <script type='text/javascript'>
      window.onerror = function(){
        parent.onerror.apply(parent, arguments);
      }
    </script>
    <script type='text/javascript' src='/lib/public/js/sinon.js'></script>
    <script type='text/javascript'>
      var Cypress = parent.Cypress;
      if (!Cypress){
        throw new Error('Cypress must exist in the parent window!');
      };
      Cypress.onBeforeLoad(window);
    </script>
    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.js"></script>
    <script type="text/javascript">
      $(function(){
        $("button.ref").click(function(e){
          e.preventDefault()

          // generate ReferenceError
          try {
            foo.bar()
          } catch (e) {
            e.name = "SilenceError"
            throw(e)
          }
        })

        $("button.xhr").click(function(e){
          e.preventDefault()

          $.get("/foo", function(data){
            $("#results").html("data is " + data)
            bar.baz()
          })
        })
      })
    </script>
  </head>
  <body>
    <button type="button" class="ref">reference err</button>
    <button type="button" class="xhr">xhr err</button>
    <div id="results"></div>
  </body>
</html>