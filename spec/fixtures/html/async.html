<!doctype html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>Async Tests</title>
    <link rel="icon" href="data:;base64,=">
    <script type='text/javascript'>
      window.onerror = function(){
        parent.onerror.apply(parent, arguments);
      }
    </script>
    <script type='text/javascript'>
      var Cypress = parent.Cypress;
      if (!Cypress){
        throw new Error('Cypress must exist in the parent window!');
      };
      Cypress.onBeforeLoad(window);
    </script>
    <script type="text/javascript" src="/bower_components/jquery/dist/jquery.js"></script>
    <script type="text/javascript">
      $(function(){
        $("form").submit(function(e){
          var form = $(this)

          setTimeout(function(){
            $.post("/users", form.serialize()).done(function(data){
              var span = $("<span><strong>form success!</strong></span>")
              span.append(JSON.stringify(data))
              form.append(span)
            })
          }, 500)

          return false
        })
      })
    </script>
  </head>
  <body style="background-color: #ddd;">
    <form>
      What is your name?
      <input name="name">
      <button id="submit" type="submit">submit</button>
    </form>
  </body>
</html>